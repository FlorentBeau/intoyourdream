<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Ember Starter Kit</title>
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <script type="text/x-handlebars">
    <header>
      <hgroup>
        <h1>Into Your Dream</h1>
        <h2>subtitle</h2>
      </hgroup>

      <nav>
        <ul>
          <li>{{#linkTo 'dreams'}}dreams{{/linkTo}}</li>
          <li>{{#linkTo 'write'}}write{{/linkTo}}</li>
          <li>{{#linkTo 'moderate'}}moderate{{/linkTo}}</li>
        </ul>
      </nav>
    </header>

    {{outlet}}

    <footer>
      <p>Copyright staive</p>
    </footer>
  </script>

  <script type="text/x-handlebars" data-template-name="write">
    <p>{{view Ember.TextArea valueBinding="dream"}}</p>
    <p>{{view Ember.TextField valueBinding="pseudo"}}</p>
    <p>{{view Ember.Select contentBinding="App.genre" valueBinding="sex"}}</p>
    <button {{action 'submit'}}>Create</button>
    {{#if errorState}}
    <p>Please fill-out every fields.</p>
    {{/if}}
  </script>

  <script type="text/x-handlebars" data-template-name="dreams">
    <section class="dreams-list">
    {{#each model itemController="dream"}}
      {{partial 'dream'}}
    {{else}}
      <p>Sorry, no dreams available.</p>
    {{/each}}
    </section>
  </script>

  <script type="text/x-handlebars" data-template-name="moderate">
    {{#if currentDream}}
    <section class="moderation-box">
      <header>
        <p class="author">{{currentDream.author}}</p>
        <p class="sex">{{currentDream.sex}}</p>
      </header>
      <p>{{currentDream.dream}}</p>
      <footer>
        <button {{action 'validateDream'}}>Yes</button>
        <button {{action 'refuseDream'}}>No</button>
      </footer>
    </section>
    {{else}}
    No dream to moderate.
    {{/if}}
  </script>

  <script type="text/x-handlebars" data-template-name="dream">
    {{partial 'dream'}}

    <section class="comments">
      <section class="post-comments">
        {{view Ember.TextArea valueBinding="comment_message"}}
        {{view Ember.TextField valueBinding="comment_author"}}
        <button {{action 'postComment'}}>Create</button>
        {{#if errorComment}}
          <p class="error">Fill in your pseudo and the comment.</p>
        {{/if}}
      </section>

      {{#each fetchedComments}}
        <section class="comment">
          <header>
            <p>Written by {{author}}</p>
          </header>

          <p>{{message}}</p>
        </section>
      {{else}}
      <p>No comments, be the first!</p>
      {{/each}}
    </section>
  </script>

  <script type="text/x-handlebars" data-template-name="_dream">
    <article class="dream">
      {{dream}}
      <footer>
        <p>{{pseudo}}</p>
        <button {{action 'niceAction'}}>Nice ({{nice}})</button>
        <button {{action 'boringAction'}}>Boring ({{boring}})</button>
        {{#linkTo 'dream' this}}Open{{/linkTo}}
      </footer>
    </article>
  </script>

  <script src="js/libs/jquery-1.9.1.js"></script>
  <script src="js/libs/handlebars-1.0.0-rc.3.js"></script>
  <script src="js/libs/ember-latest.js"></script>
  <script src="js/libs/ember-data.js"></script>
  <script src="js/app.js"></script>

</body>
</html>
